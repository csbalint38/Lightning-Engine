<UserControl x:Class="Editor.Editors.TextureView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Editor.Editors"
             mc:Ignorable="d" 
             d:DataContext="{d:DesignInstance Type=local:TextureEditor}"
             d:DesignHeight="450"
             d:DesignWidth="800">
    <Grid Background="#1f242d">
        <Grid ClipToBounds="True"
              Background="{StaticResource TiledGridBackground}"
              x:Name="GrdBackground"
              MouseLeftButtonDown="GrdBackground_MouseLeftButtonDown"
              MouseLeftButtonUp="GrdBackground_MouseLeftButtonUp"
              MouseWheel="GrdBackground_MouseWheel"
              PreviewMouseMove="GrdBackground_PreviewMouseMove">
            <Grid.LayoutTransform>
                <ScaleTransform ScaleX="{Binding ScaleFactor}"
                                ScaleY="{Binding ScaleFactor}"/>
            </Grid.LayoutTransform>
            <Canvas IsHitTestVisible="True">
                <Rectangle Canvas.Left="{Binding PanOffset.X}"
                           Canvas.Top="{Binding PanOffset.Y}"
                           Width="{Binding Path=ActualWidth, ElementName=textureImage}"
                           Height="{Binding Path=ActualHeight, ElementName=textureImage}">
                    <Rectangle.Fill>
                        <ImageBrush x:Name="textureBackground"
                                    ImageSource="/Resources/TextureEditor/Checkerboard.png"
                                    TileMode="Tile"
                                    Viewport="0,0,64,64"
                                    ViewportUnits="Absolute"/>
                    </Rectangle.Fill>
                </Rectangle>
            </Canvas>
            <Canvas IsHitTestVisible="True">
                <Image x:Name="textureImage"
                       Source="{Binding SelectedSliceBitmap}"
                       Canvas.Left="{Binding PanOffset.X}"
                       Canvas.Top="{Binding PanOffset.Y}"/>
            </Canvas>
        </Grid>
        <Border x:Name="zoomLabel"
                Margin="5"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Background="#50000000"
                CornerRadius="5"
                IsHitTestVisible="False"
                Opacity="0"
                d:Opacity="1">
            <TextBlock Text="{Binding ScaleFactor, StringFormat=ZOOM {0:p0}}"
                       d:Text="ZOOM 50%"
                       Margin="10,5"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       FontFamily="Bahnschrift condensed"
                       FontSize="32"
                       Foreground="#FFC800"/>
        </Border>
    </Grid>
</UserControl>
